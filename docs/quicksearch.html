<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"classes.list.html":{"id":"classes.list.html","title":"Reference","body":" leaflet.d3chart Reference 'L.D3chart' Exemples International comparison of PISA scores Reference Classes 'L.D3chart' add add bar, pie and polar charts to a leaflet map × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-01-31T17:25:50+01:00 using the DocStrap template. "},"tutorials.list.html":{"id":"tutorials.list.html","title":"Exemples","body":" leaflet.d3chart Reference 'L.D3chart' Exemples International comparison of PISA scores Exemples Classes 'L.D3chart' add add bar, pie and polar charts to a leaflet map × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-01-31T17:25:50+01:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" leaflet.d3chart Reference 'L.D3chart' Exemples International comparison of PISA scores Leaflet.d3chartLeaflet.d3chart is a leaflet plugin for adding to a leaflet map small animated bar charts, pie charts or polar area charts. It can be used to visualize multiple variables associated to geographical coordinates and to look at the evolution of these variables. UsageYou need to include the leaflet CSS and javascript files and then the leaflet.d3chart javascript file in the head section of your document: &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/leaflet@1.0.2/dist/leaflet.css&quot; media=&quot;screen&quot; title=&quot;leaflet&quot;&gt; &lt;script src=&quot;https://unpkg.com/leaflet@1.0.2/dist/leaflet.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://unpkg.com/leaflet.d3chart@0.1.2/dist/leaflet.d3chart.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;Once these files included, you can create charts with function L.d3chart(). All parameters are described here. ExampleHere is a sample code that initializes a map and adds to it a barchart that represents three random values. Then the code updates the value every two seconds and redraws the chart. var center = [48.861415, 2.349326]; var mymap = L.map('map').setView(coord, 13); L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(mymap); // Let us generate fake data function fakeData() { return [Math.Random(), Math.random(), Math.random()]; } // Create a barchart var myBarChart = L.d3chart(center, {data: fakeData()}); mymap.addLayer(myBarChart); // Update data every 2 seconds setInterval(function() { myBarChart.setOptions({data: fakeData()}) }, 2000); × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-01-31T17:25:50+01:00 using the DocStrap template. "},"-_L.D3chart_.html":{"id":"-_L.D3chart_.html","title":"L.D3chart","body":" leaflet.d3chart Reference 'L.D3chart' Exemples International comparison of PISA scores L.D3chart add add bar, pie and polar charts to a leaflet map L.D3chart is used to add dynamic charts on a leaflet map. It is specially useful to represent multiple data values associated to some geographical coordinates. Constructor new L.D3chart(center, options) Name Type Description center L.Point options D3chartOptions Object containing options to construct a chart. Example L.d3chart([0, 0], {data: [1, 2, 3], maxValues: 3}) Options Name Type Default Description type string &quot;bar&quot; Type of chart to create. Possible values are &quot;bar&quot; for barcharts, &quot;pie&quot; for pie charts, &quot;polar-radius&quot; and &quot;polar-area&quot; for polar area charts where values are represented either by the radius or the area of the slices. data Array.&lt;number&gt; [1] Data values the chart has to represent. maxValues Array.&lt;number&gt; [1] maximal absolute value the data could take. It can be a single numeric value or an array of values with same length as data. In the first case, all values will be represented with the same scale while in the second case, each value will have its own scale. This is useful when one wants to represent multiple variables that are not comparable. fillColor string #4281e5 Color used to fill the shape when data contains only one value. colorPalette Array.&lt;string&gt; d3.schemeCategory10 Array of colors used to fill each part of the chart representing one value of data. width number 60 Width of the chart when `type` equals 'bar' or maximal diameter of the chart for all other types. height number 60 Maximal height of barcharts. opacity number 1 Opacity of the chart. showLabels boolean false Should values be displayed in the charts? labelStyle string &quot;font-family:sans-serif&quot; CSS style to apply to labels labelMinSize number 8 Labels are automatically hidden if the label height is less than this number. labelMaxSize number 24 Maximal height of labels. labelPadding number 2 Padding to apply to labels. labelPrecision number 0 Number of significant digits to keep in labels. If it is equal to 0, values are displayed as is. labelColor string &quot;auto&quot; Color to apply to labels. If &quot;auto&quot;, text will be black or white depending on the background color. labelText Array.&lt;string&gt; | null null Labels to display. It must have same length as data or be null. In the last case, data values are used as labels. transitionTime number 750 Duration in millisecondq of transitions. Methods setOptions(options) Update the options of a D3chart object. Name Type Description options D3chartOptions Object containing options to update the chart. × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-01-31T17:25:50+01:00 using the DocStrap template. "},"tutorial-PISA scores.html":{"id":"tutorial-PISA scores.html","title":"Tutorial: International comparison of PISA scores","body":" leaflet.d3chart Reference 'L.D3chart' Exemples International comparison of PISA scores International comparison of PISA scores The Program for International Student Assesment (PISA) is an international study conducted by the OECD. It measures the evolution of the performance of 15 years old pupils on mathematics, science and reading in different countries. This document demonstrates how to use the leaflet.d3chart plugin to represent over a leaflet map the scores of the pupils of the different countries. DataThe data to represent has the following format: var data = [ {&quot;year&quot;:2015,&quot;country&quot;:&quot;Australia&quot;,&quot;math&quot;:494,&quot;reading&quot;:503,&quot;science&quot;:510,&quot;lon&quot;:133.7751,&quot;lat&quot;:-25.2744}, {&quot;year&quot;:2015,&quot;country&quot;:&quot;Austria&quot;,&quot;math&quot;:497,&quot;reading&quot;:485,&quot;science&quot;:495,&quot;lon&quot;:14.5501,&quot;lat&quot;:47.5162}, {&quot;year&quot;:2015,&quot;country&quot;:&quot;Belgium&quot;,&quot;math&quot;:507,&quot;reading&quot;:499,&quot;science&quot;:502,&quot;lon&quot;:4.4699,&quot;lat&quot;:50.5039}, ... ];We also have the average score for each category: var avgScores = {math: 493.4, reading: 492.7, science: 498.2};Initialisation of the mapIn the header of our html file we include leaflet and the leaflet.d3chart plugin: &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/leaflet@0.7.3/dist/leaflet.css&quot; media=&quot;screen&quot; title=&quot;leaflet&quot;&gt; &lt;script src=&quot;https://unpkg.com/leaflet@0.7.3/dist/leaflet.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt; &lt;script src=&quot;../dist/leaflet.d3chart.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://unpkg.com/leaflet.d3chart@0.1.3/dist/leaflet.d3chart.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;We also add a div that will contain the leaflet map: &lt;div id=&quot;map&quot; style=&quot;width:100%;height:400px;&quot;&gt;&lt;/div&gt;The following javascript code initializes the map: var center = [48.861415, 4.349326]; var mymap = L.map('map').setView(center, 4); var tiles = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}'); tiles.addTo(mymap);We now want to add to the map barcharts that represent the deviance to the mean of the three scores for year 2015. To do so, we loop over our data and create a d3charts object for each country. We store store them in an array so we will be able to update them later. var charts = {}; for (var i = 0; i &lt; data.length; i++) { var d = data[i]; if (d.year == 2015) { var scoresDiff = [ d.math - avgScores.math, d.reading - avgScores.reading, d.science - avgScores.science ]; charts[d.country] = L.d3chart([d.lat, d.lon], {data: scoresDiff, maxValues: 90}); mymap.addLayer(charts[d.country] ) ; } } We can improve our map by passing some additional options to L.d3chart to reduce the size of the charts and use prettier colors: charts[d.country] = L.d3chart( [d.lat, d.lon], { data: scoresDiff, maxValues: 90, width:40, height:40, colorPalette: [&quot;#7A8B99&quot;, &quot;#91ADC2&quot;, &quot;#A9DDD6&quot;] } ); Update chartsWe have represented the PISA results for 2015 but we would like to also look at the results of the other years. To do so let us add a select input to our document. Each time the user changes the value of the input a javascript function called &quot;updateMap&quot; is &lt;select id = &quot;year&quot; onchange=&quot;updateMap()&quot;&gt; &lt;option value=&quot;2015&quot;&gt;2015&lt;/option&gt; &lt;option value=&quot;2012&quot;&gt;2012&lt;/option&gt; &lt;option value=&quot;2009&quot;&gt;2009&lt;/option&gt; &lt;option value=&quot;2006&quot;&gt;2006&lt;/option&gt; &lt;/select&gt;To update charts we use the setOption method. function updateMap() { var year = document.getElementById(&quot;year&quot;).value; for (var i = 0; i &lt; data.length; i++) { var d = data[i]; if (d.year == year) { var scoresDiff = [ d.math - avgScores.math, d.reading - avgScores.reading, d.science - avgScores.science ]; charts[d.country].setOptions({data:scoresDiff}); } } }Here is the final result: 2015 2012 2009 2006 × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-01-31T17:25:50+01:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
